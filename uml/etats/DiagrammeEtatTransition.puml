@startuml
title Cycle de Vie Declaration (Optimisé)
skinparam style strictuml
skinparam linetype ortho
skinparam nodesep 60
skinparam ranksep 60

skinparam state {
    BackgroundColor White
    BorderColor Black
    ArrowColor Black
    fontName Arial
}

' --- ÉTATS ---
state "En Cours d'Édition" as EnCours : entry / initialiser()
state "Nouvelle" as Nouvelle : entry / dateCreation = Now
state "Modifiée" as Modifiee : entry / dateModif = Now
state "Résolue" as Resolue : entry / estResolu = true

' --- POINTS DE SORTIE DISTINCTS ---
' L'astuce est ici : on crée deux fins pour éviter les lignes qui traversent tout
state "X" as FinAbandon <<end>>
state "O" as FinSucces <<end>>

' --- FLUX PRINCIPAL (Colonne Vertébrale) ---
[*] -down-> EnCours : Créer
EnCours -down-> Nouvelle : Valider
Nouvelle -down-> Resolue : Objet Trouvé
Resolue -down-> FinSucces : Archiver

' --- GESTION DES MODIFICATIONS (A Droite) ---
' Pas de croisement car c'est isolé à droite
Nouvelle -right-> Modifiee : Éditer
Modifiee -right-> Modifiee : Ré-éditer
Modifiee -down-> Resolue : Objet Trouvé

' --- GESTION DES SUPPRESSIONS (A Gauche) ---
' Toutes les flèches partent vers la gauche, vers un point de chute dédié
EnCours -left-> FinAbandon : Annuler
Nouvelle -left-> FinAbandon : Supprimer
Modifiee -up-> FinAbandon : Supprimer

' Note de légende pour expliquer les deux ronds noirs
note right of FinSucces
  Fin normale
  (Archivage)
end note

note left of FinAbandon
  Fin par abandon
  ou suppression
end note

@enduml